solar
0lzpwk5e6s3w

IP Address: 212.27.2.243

ps -ef | grep python

tail -f /var/log/monit.log 


/etc/monit/monitrc


check process port_1_monitor.sh with pidfile /var/run/port_1_monitor.pid
   start = "/home/solar/versa_upgrade/monitoring/port_1_monitor.sh start"
   stop = "/home/solar/versa_upgrade/monitoring/port_1_monitor.sh stop"



/home/solar/versa_upgrade/monitoring/port_1_monitor.sh

#!/bin/bash

case $1 in
  start)
     /usr/bin/python3 /home/solar/versa_upgrade/port_1.py 1>/tmp/port_1_output.out &
     echo $! > /var/run/port_1_monitor.pid ;
     ;;
   stop)
     kill `cat /var/run/port_1_monitor.pid` ;;
   *)
     echo "usage: port_1_monitor {start|stop}" ;;
esac
exit 0








Firewall:
root
Skinke2022

# apt-get install monit

Configured autostart on the network interface on reboot on

File:

/etc/rc.local:

File Contents:
#!/bin/sh -e



sleep 30
mbimcli --device=/dev/cdc-wdm0 --query-device-caps
mbim-network /dev/cdc-wdm0 start
mbimcli -d /dev/cdc-wdm0 -p --query-ip-configuration





ip link set dev wwan0 up
ip addr add 212.27.2.243/29 dev wwan0
sudo ip route add default via 212.27.2.244 dev wwan0
exit 0



Static DNS with resolvconf:

/etc/resolvconf/resolv.conf.d/head



File contents:
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
# DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
# 127.0.0.53 is the systemd-resolved stub resolver.
# run "systemd-resolve --status" to see details about the actual nameservers.



nameserver 8.8.8.8
nameserver 8.8.4.4
nameserver 127.0.0.53





If reinstall would be required, setup is:

minicom -o -D /dev/ttyUSB2 -b 9600



at!entercnd="A710"
at+cpin?

at!custom="IPV6ENABLE",1
at+cgdcont=1,"ipv4v6","r.ispsn"

at!selrat=06

at!usbcomp = 1,1,1009
at!reset




Download script:

git clone https://github.com/mavstuff/swi_setusbcomp





List components:
apt-get install libtry-tiny-perl
apt-get install libuuid-tiny-perl
apt-get install libipc-shareable-perl
apt-get install libjson-perl


You'll need to install perl and a few others, it will tell you what's mising.

swi_setusbcomp.pl --device=/dev/cdc-wdm0



Find one with NBIM and AT and use the number in the next command:



swi_setusbcomp.pl --device=/dev/cdc-wdm0 --usbcomp=<NUMBER HERE>



sudo service network-manager stop

sudo mbimcli --device=/dev/cdc-wdm0 --query-device-caps

sudo mbim-network /dev/cdc-wdm0 start
sudo mbimcli -d /dev/cdc-wdm0 -p --query-ip-configuration



If any of these fails, just force reinstall network and modem manager, seems to have solved it.


sudo ip link set dev wwan0 up

sudo ip addr add 212.27.2.243/29 dev wwan0

sudo ip route add default via 212.27.2.247 dev wwan0
